<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Scripts</title>
    <link rel="stylesheet" href="style.css">
    <!-- Carga de Tailwind CSS desde CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Enlace a tu archivo de estilos personalizado (si tienes uno) -->
    <!-- <link rel="stylesheet" href="style.css"> -->
   
</head>
<body>
    <div class="layout">
        <nav class="sidebar">
                <h2>Reportes</h2>
                <ul>
                    <li><button class="sidebar-link" data-section="mos">MOS</button></li>
                    <li><button class="sidebar-link" data-section="gs">Gere Solped</button></li>
                    <li><button class="sidebar-link" data-section="dispo">Disponibilidad Futura</button></li>
                    <li><button class="sidebar-link" data-section="gc">Gere Comex</button></li>
                    <!-- Agrega más secciones si lo deseas -->
                </ul>
        </nav>
        <div class="center-wrapper">
            <section class="cuadro center-section" id="section-mos">
                <div class="seccion-1 titulo">
                    <h1>Tratamiento bases MOS</h1>
                    <form action="" class="form">
                        <label for="reportSelect">Selecciona un reporte:</label>
                        <select id="reportSelect" class="dropdown">
                            <option value="scriptA">Forecast</option>
                            <option value="scriptB">Ventas</option>
                            <option value="scriptC">MARA</option>
                        </select>
                    </form>
                </div>

                <div class="botones">
                    <button class="script-button scriptA-button" data-script="1">Mainstream</button>
                    <button class="script-button scriptA-button" data-script="2">AXS</button>
                    <button class="script-button scriptA-button" data-script="3">Premium</button>
                    <button class="script-button scriptA-button" data-script="4">Consolidación</button>

                    <!-- Botones para Script B (inicialmente ocultos) -->
                    <button class="script-button scriptB-button hidden" data-script="5">Mainstream</button>
                    <button class="script-button scriptB-button hidden" data-script="6">AXS</button>
                    <button class="script-button scriptB-button hidden" data-script="7">Premium</button>
                    <button class="script-button scriptB-button hidden" data-script="8">Consolidación</button>

                    <!-- Botones para Script C (inicialmente ocultos) -->
                    <button class="script-button scriptC-button hidden" data-script="9">Consolidar MARA</button>
                </div>

                
            </section>
            <section  class="cuadro center-section hidden" id="section-gs">
                <div class="seccion-2">
                    <h1>Gere Solped</h1>
                </div>

                <div class="botones gs-botones">
                    <div class="gs-row">
                        <button class="script-button" data-script="GS1">Descarga VMP</button>
                        <button class="script-button" data-script="GS2">Descarga INP</button>
                    </div>
                    <button class="script-button gs-bottom" data-script="GS3">Consolidación</button>

                    
                </div>
            
            </section>
               

            
        <!-- ...contenido de Gere Solped... -->
            <section class="cuadro center-section section-dispo hidden" id="section-dispo">
                <div class="seccion-3 titulo">
                    <h1>Disponibilidad Futura</h1>
                    <form action="" class="form">
                        <label for="reportSelect">Selecciona Legacy:</label>
                        <select id="reportSelectDf" class="dropdown">
                            <option value="scriptdfOem">OEM</option>
                            <option value="scriptdfAxs">AXS</option>
                            <option value="scriptdfInp">Inchcape</option>
                            <option value="scriptdfDitec">Ditec</option>
                        </select>
                    </form>
                </div>

                <div class="botones">
                    <button class="script-button scriptdfOem-button" data-script="dfOem">DF OEM</button>
                    <button class="script-button scriptdfAxs-button hidden" data-script="dfAxs">DF AXS</button>
                    <button class="script-button scriptdfInp-button hidden" data-script="dfInp">DF Inchcape</button>
                    <button class="script-button scriptdfDitec-button hidden" data-script="dfDitec">DF Ditec</button>

                    <!-- Botones para Script B (inicialmente ocultos) -->
  
                </div>

                
            </section>
            <section  class="cuadro center-section hidden" id="section-gc">
                <div class="seccion-2">
                    <h1>Gere Comex</h1>
                </div>

                <div class="botones gc-botones">
                    <div class="gc-row">
                        <button class="script-button" data-script="GC1">Descargas SAP</button>
                    </div>   
                </div>
            
            </section>





        </div>
    </div>
    <script>
        // Obtener referencias a los elementos del DOM
        const reportSelect = document.getElementById('reportSelect');
        const scriptAButtons = document.querySelectorAll('.scriptA-button');
        const scriptBButtons = document.querySelectorAll('.scriptB-button');
        const scriptCButtons = document.querySelectorAll('.scriptC-button');
        // ¡Esta línea es crucial y ahora está en el lugar correcto!
        const outputConsole = document.getElementById('outputConsole');
        //SIDEBAR
        const sidebarLinks = document.querySelectorAll('.sidebar-link');
        const centerSections = document.querySelectorAll('.center-section');

        const reportSelectDf = document.getElementById('reportSelectDf');
        const scriptdfOemButtons = document.querySelectorAll('.scriptdfOem-button');
        const scriptdfAxsButtons = document.querySelectorAll('.scriptdfAxs-button');
        const scriptdfInpButtons = document.querySelectorAll('.scriptdfInp-button');
        const scriptdfDitecButtons = document.querySelectorAll('.scriptdfDitec-button');

// Función para mostrar/ocultar botones en Disponibilidad Futura
        function updateDfButtons() {
            const selectedValue = reportSelectDf.value;

            // Oculta todos los botones primero
            scriptdfOemButtons.forEach(btn => btn.classList.add('hidden'));
            scriptdfAxsButtons.forEach(btn => btn.classList.add('hidden'));
            scriptdfInpButtons.forEach(btn => btn.classList.add('hidden'));
            scriptdfDitecButtons.forEach(btn => btn.classList.add('hidden'));

            // Muestra solo los botones correspondientes
            if (selectedValue === 'scriptdfOem') {
                scriptdfOemButtons.forEach(btn => btn.classList.remove('hidden'));
            } else if (selectedValue === 'scriptdfAxs') {
                scriptdfAxsButtons.forEach(btn => btn.classList.remove('hidden'));
            } else if (selectedValue === 'scriptdfInp') {
                scriptdfInpButtons.forEach(btn => btn.classList.remove('hidden'));
            } else if (selectedValue === 'scriptdfDitec') {
                scriptdfDitecButtons.forEach(btn => btn.classList.remove('hidden'));
            }
        }

        // Añadir event listener al select de Disponibilidad Futura
            if (reportSelectDf) {
                reportSelectDf.addEventListener('change', updateDfButtons);
                window.addEventListener('DOMContentLoaded', updateDfButtons);
            }





        // Función para mostrar/ocultar botones
        function updateButtons() {
            const selectedValue = reportSelect.value;

            // Ocultar todos los botones primero
            scriptAButtons.forEach(button => button.classList.add('hidden'));
            scriptBButtons.forEach(button => button.classList.add('hidden'));
            scriptCButtons.forEach(button => button.classList.add('hidden'));

            // Mostrar los botones según la opción seleccionada
            if (selectedValue === 'scriptA') {
                scriptAButtons.forEach(button => button.classList.remove('hidden'));
            } else if (selectedValue === 'scriptB') {
                scriptBButtons.forEach(button => button.classList.remove('hidden'));
            } else if (selectedValue === 'scriptC') {
                scriptCButtons.forEach(button => button.classList.remove('hidden'));
            }
        }


        // Sidebar navigation para mostrar la sección correspondiente
        sidebarLinks.forEach(btn => {
            btn.addEventListener('click', function() {
                // Quita la clase activa de todos
                sidebarLinks.forEach(b => b.classList.remove('active'));
                this.classList.add('active');

                // Oculta todas las secciones centrales
                centerSections.forEach(sec => sec.classList.add('hidden'));

                // Muestra la sección correspondiente
                const section = this.getAttribute('data-section');
                document.getElementById('section-' + section).classList.remove('hidden');
            });
        });
        // Opcional: activa la primera sección al cargar
        document.querySelector('.sidebar-link[data-section="mos"]').classList.add('active');
        document.getElementById('section-mos').classList.remove('hidden');
        // Función para añadir texto a la consola de salida
        // Esta función será llamada desde Python
        // function appendOutput(message) {
        //     const p = document.createElement('p');
        //     p.textContent = message;
        //     outputConsole.appendChild(p);
        //     outputConsole.scrollTop = outputConsole.scrollHeight;
        // }

        // Función para limpiar la consola de salida
        // function clearOutput() {
        //     outputConsole.innerHTML = '';
        // }

        // Añadir un event listener al select para detectar cambios
        reportSelect.addEventListener('change', updateButtons);

        // Llamar a la función una vez al cargar la página para asegurar el estado inicial correcto
        window.onload = updateButtons;

        
        // Manejo del click en los botones
        document.querySelectorAll('.script-button').forEach(button => {
            button.addEventListener('click', () => {
            const scriptId = button.getAttribute('data-script');
            let nombreScript = '';
            if (scriptId === '1') nombreScript = 'fc_consolidado_mainstream.py';
            else if (scriptId === '2') nombreScript = 'script2.py';
            // ...agrega más si tienes otros scripts...

            if (typeof pywebview !== 'undefined' && pywebview.api && pywebview.api.execute_script) {
                pywebview.api.execute_script(scriptId);
            }
            // No alerts, solo ejecuta el script
            });
        });

    </script>
</body>
</html>